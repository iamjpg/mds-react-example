"use strict";(self.webpackChunkmds_react_test=self.webpackChunkmds_react_test||[]).push([[862],{3862:function(t,e,i){i.r(e),i.d(e,{mx_image_upload:function(){return o}});var s=i(4165),n=i(5861),a=i(5671),h=i(3144),r=i(5953),o=function(){function t(e){(0,a.Z)(this,t),(0,r.r)(this,e),this.mxThumbnailChange=(0,r.c)(this,"mxThumbnailChange",7),this.hasInstructions=!1,this.hasSuccess=!1,this.hasError=!1,this.acceptImage=!0,this.acceptPdf=!1,this.assetName="image",this.avatar=!1,this.error=!1,this.uploadBtnType="contained",this.thumbnailSize="cover",this.isUploaded=!1,this.isUploading=!1,this.removeButtonLabel="Remove",this.showButton=!0,this.showIcon=!0,this.showDropzoneText=!0,this.uploadButtonLabel="Upload",this.isDraggingOver=!1,this.isFileSelected=!1}return(0,h.Z)(t,[{key:"onThumbnailUrlChange",value:function(){this.thumbnailUrl&&(this.isUploaded=!0),this.mxThumbnailChange.emit(this.thumbnailUrl)}},{key:"connectedCallback",value:function(){this.onThumbnailUrlChange()}},{key:"componentWillRender",value:function(){this.hasInstructions=!!this.element.querySelector('[slot="instructions"]'),this.hasSuccess=!!this.element.querySelector('[slot="success"]'),this.hasError=!!this.element.querySelector('[slot="error"]')}},{key:"removeFile",value:function(){var t=(0,n.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasFile&&!this.isUploading){t.next=2;break}return t.abrupt("return");case 2:this.isFileSelected=!1,this.isUploaded=!1,this.isUploading=!1,this.fileInput.value="",this.fileInput.dispatchEvent(new window.Event("change",{bubbles:!0,cancelable:!0})),this.fileInput.dispatchEvent(new window.Event("input",{bubbles:!0,cancelable:!0})),this.mxThumbnailChange.emit(null);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"selectFile",value:function(){var t=(0,n.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasFile){t.next=2;break}return t.abrupt("return");case 2:this.isFileSelected=!1,this.fileInput.value="",this.fileInput.click();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onButtonClick",value:function(t){t.stopPropagation(),t.preventDefault(),this.isUploading||(this.hasFile?this.removeFile():this.selectFile())}},{key:"onInput",value:function(t){this.error=!1,this.isFileSelected=t.target.files&&t.target.files.length>0,this.isFileSelected?this.setThumnailDataUri(t.target.files[0]):this.thumbnailDataUri=null}},{key:"setThumnailDataUri",value:function(t){var e=this;if(this.thumbnailDataUri=null,/\.(jpe?g|png|gif)$/i.test(t.name)){var i=new FileReader;i.onload=function(){e.thumbnailDataUri=i.result,e.mxThumbnailChange.emit(e.thumbnailDataUri)},i.readAsDataURL(t)}}},{key:"onDragOver",value:function(){this.isDraggingOver=!0}},{key:"onDragLeave",value:function(){this.isDraggingOver=!1}},{key:"accept",get:function(){var t=[];return this.acceptImage&&t.push("image/*"),this.acceptPdf&&t.push(".pdf"),t.join(",")||null}},{key:"dropzoneWidth",get:function(){return this.width?this.width:this.avatar?"80px":"308px"}},{key:"dropzoneHeight",get:function(){return this.height?this.height:this.avatar?"80px":"auto"}},{key:"dropzoneClass",get:function(){var t="dropzone relative w-full h-full px-16 rounded-2xl overflow-hidden";return this.hasFile&&(t+=" opacity-0"),this.isDraggingOver&&(t+=" drag-over"),t+=this.showIcon&&this.showDropzoneText?" py-24":" py-16"}},{key:"hasFile",get:function(){return this.isFileSelected||this.isUploaded}},{key:"thumbnailBackgroundImage",get:function(){var t=this.thumbnailUrl;return this.isFileSelected&&(t=this.thumbnailDataUri),t?"url(".concat(t,")"):null}},{key:"thumbnailBackgroundSize",get:function(){return["contain","cover","auto","stretch"].includes(this.thumbnailSize)?"stretch"===this.thumbnailSize?"100% 100%":this.thumbnailSize:"cover"}},{key:"render",value:function(){var t,e=this;return t=this.icon?(0,r.h)("i",{"data-testid":"upload-icon",class:"dropzone-icon "+this.icon}):this.avatar?(0,r.h)("i",{"data-testid":"avatar-icon",class:"mds-user-circle text-icon"}):(0,r.h)("i",{"data-testid":"image-icon",class:"mds-image text-icon"+(this.showDropzoneText?" mb-8":"")}),(0,r.h)(r.H,{class:"mx-image-upload block"},(0,r.h)("div",{"data-testid":"dropzone-wrapper",class:"dropzone-wrapper flex w-full items-center justify-center relative rounded-2xl text-3 overflow-hidden",style:{height:this.dropzoneHeight,width:this.dropzoneWidth}},(0,r.h)("div",{class:this.dropzoneClass},(0,r.h)("div",{class:"flex flex-col items-center justify-center w-full h-full"},this.showIcon&&t,(0,r.h)("slot",{name:"dropzone-text"},(0,r.h)("div",{"data-testid":"dropzone-text",class:"text-center"+(this.showDropzoneText&&!this.avatar?"":" hidden")},(0,r.h)("p",{class:"subtitle1 my-0"},"No ",this.assetName," to show"),(0,r.h)("p",{class:"text-4 my-0 mt-4"},"Click to add ",this.assetName)))),(0,r.h)("svg",{class:"dashed-border absolute inset-0 pointer-events-none",width:"100%",height:"100%"},(0,r.h)("rect",{width:"100%",height:"100%",fill:"none",rx:"16",ry:"16","stroke-width":"1","stroke-dasharray":"4,8"})),(0,r.h)("input",{ref:function(t){return e.fileInput=t},id:this.inputId,name:this.name,type:"file",accept:this.accept,"aria-label":this.elAriaLabel,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onInput:this.onInput.bind(this),onDragOver:this.onDragOver.bind(this),onDragLeave:this.onDragLeave.bind(this),onDrop:this.onDragLeave.bind(this)})),this.hasFile&&this.thumbnailBackgroundImage&&(0,r.h)("div",{"data-testid":"thumbnail",class:"thumbnail absolute inset-0 bg-center bg-no-repeat pointer-events-none",style:{backgroundImage:this.thumbnailBackgroundImage,backgroundSize:this.thumbnailBackgroundSize}}),(0,r.h)("div",{"data-testid":"uploaded",class:"flex items-center justify-center absolute inset-0 pointer-events-none "+(this.isUploaded?"":" hidden")},(0,r.h)("slot",{name:"uploaded"})),this.isUploading&&(0,r.h)("div",{"data-testid":"progress",class:"uploading-progress flex items-center justify-center opacity-50 absolute inset-0"},(0,r.h)("mx-circular-progress",{size:"2rem"}))),this.showButton&&(0,r.h)("mx-button",{"data-testid":"upload-button",class:"mt-16",btnType:this.hasFile&&!this.isUploading?"outlined":this.uploadBtnType,onClick:this.onButtonClick.bind(this),disabled:this.isUploading},this.hasFile&&!this.isUploading?this.removeButtonLabel:this.uploadButtonLabel),(this.hasInstructions||this.assistiveText)&&(0,r.h)("p",{class:"caption1 my-16"},(0,r.h)("slot",{name:"instructions"},this.assistiveText)),this.hasSuccess&&(0,r.h)("p",{class:"upload-success caption1 my-16"},(0,r.h)("slot",{name:"success"})),this.hasError&&(0,r.h)("p",{class:"upload-error caption1 my-16"},(0,r.h)("slot",{name:"error"})))}},{key:"element",get:function(){return(0,r.g)(this)}}],[{key:"watchers",get:function(){return{thumbnailUrl:["onThumbnailUrlChange"]}}}]),t}()}}]);
//# sourceMappingURL=862.f9eb1717.chunk.js.map